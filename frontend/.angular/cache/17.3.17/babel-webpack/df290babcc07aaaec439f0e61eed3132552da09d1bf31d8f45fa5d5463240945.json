{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule, Validators } from '@angular/forms';\nimport { InputTextModule } from 'primeng/inputtext';\nimport { ButtonModule } from 'primeng/button';\nimport { TableModule } from 'primeng/table';\nimport { DropdownModule } from 'primeng/dropdown';\nimport { TagModule } from 'primeng/tag';\nimport { RippleModule } from 'primeng/ripple';\nlet MunicipalitiesManagementComponent = class MunicipalitiesManagementComponent {\n  constructor(fb, api, catalog, messages) {\n    this.fb = fb;\n    this.api = api;\n    this.catalog = catalog;\n    this.messages = messages;\n    this.form = this.fb.nonNullable.group({\n      daneCode: ['', Validators.required],\n      name: ['', Validators.required],\n      departmentId: ['', Validators.required]\n    });\n    this.displayedColumns = ['daneCode', 'name', 'department', 'isActive', 'actions'];\n    this.data = [];\n  }\n  ngOnInit() {\n    this.catalog.loadInitial();\n    this.load();\n  }\n  load() {\n    this.api.get('/api/municipalities').subscribe(list => this.data = list);\n  }\n  save() {\n    if (this.form.invalid) return;\n    this.api.post('/api/municipalities', this.form.getRawValue()).subscribe({\n      next: () => {\n        this.messages.add({\n          severity: 'success',\n          summary: 'Municipio guardado'\n        });\n        this.form.reset();\n        this.load();\n      },\n      error: error => this.messages.add({\n        severity: 'error',\n        summary: 'Error',\n        detail: error.error?.message ?? 'No se pudo guardar'\n      })\n    });\n  }\n  deactivate(item) {\n    this.api.delete(`/api/municipalities/${item.id}`).subscribe(() => {\n      this.messages.add({\n        severity: 'info',\n        summary: 'Municipio desactivado'\n      });\n      this.load();\n    });\n  }\n};\nMunicipalitiesManagementComponent = __decorate([Component({\n  selector: 'app-municipalities-management',\n  standalone: true,\n  imports: [CommonModule, ReactiveFormsModule, InputTextModule, DropdownModule, ButtonModule, TableModule, TagModule, RippleModule],\n  templateUrl: './municipalities-management.component.html',\n  styleUrls: ['./municipalities-management.component.scss']\n})], MunicipalitiesManagementComponent);\nexport { MunicipalitiesManagementComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}