{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { TableModule } from 'primeng/table';\nimport { ButtonModule } from 'primeng/button';\nimport { DropdownModule } from 'primeng/dropdown';\nimport { InputTextModule } from 'primeng/inputtext';\nimport { PasswordModule } from 'primeng/password';\nimport { TagModule } from 'primeng/tag';\nimport { CardModule } from 'primeng/card';\nimport { ReactiveFormsModule, Validators } from '@angular/forms';\nimport { RippleModule } from 'primeng/ripple';\nlet UsersManagementComponent = class UsersManagementComponent {\n  constructor(api, fb, messages) {\n    this.api = api;\n    this.fb = fb;\n    this.messages = messages;\n    this.displayedColumns = ['username', 'role', 'isBlocked', 'isActive', 'actions'];\n    this.data = [];\n    this.roleOptions = [{\n      label: 'Administrador',\n      value: 'ADMIN'\n    }, {\n      label: 'Normal',\n      value: 'NORMAL'\n    }];\n    this.form = this.fb.nonNullable.group({\n      username: ['', Validators.required],\n      password: ['', Validators.required],\n      role: ['NORMAL', Validators.required]\n    });\n  }\n  ngOnInit() {\n    this.load();\n  }\n  load() {\n    this.api.get('/api/users').subscribe(users => this.data = users);\n  }\n  create() {\n    if (this.form.invalid) return;\n    this.api.post('/api/users', this.form.getRawValue()).subscribe({\n      next: () => {\n        this.messages.add({\n          severity: 'success',\n          summary: 'Usuario creado'\n        });\n        this.form.reset({\n          role: 'NORMAL'\n        });\n        this.load();\n      },\n      error: error => this.messages.add({\n        severity: 'error',\n        summary: 'Error',\n        detail: error.error?.message ?? 'No se pudo crear'\n      })\n    });\n  }\n  toggleActive(user) {\n    this.api.patch(`/api/users/${user.id}`, {\n      isActive: !user.isActive\n    }).subscribe(() => this.load());\n  }\n  unlock(user) {\n    this.api.patch(`/api/users/${user.id}`, {\n      isBlocked: false,\n      failedAttempts: 0\n    }).subscribe(() => {\n      this.messages.add({\n        severity: 'info',\n        summary: 'Usuario desbloqueado'\n      });\n      this.load();\n    });\n  }\n};\nUsersManagementComponent = __decorate([Component({\n  selector: 'app-users-management',\n  standalone: true,\n  imports: [CommonModule, TableModule, ButtonModule, DropdownModule, InputTextModule, PasswordModule, TagModule, CardModule, RippleModule, ReactiveFormsModule],\n  templateUrl: './users-management.component.html',\n  styleUrls: ['./users-management.component.scss']\n})], UsersManagementComponent);\nexport { UsersManagementComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}