{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { ReactiveFormsModule, Validators } from '@angular/forms';\nimport { CardModule } from 'primeng/card';\nimport { InputTextModule } from 'primeng/inputtext';\nimport { DropdownModule } from 'primeng/dropdown';\nimport { InputSwitchModule } from 'primeng/inputswitch';\nimport { CheckboxModule } from 'primeng/checkbox';\nimport { ButtonModule } from 'primeng/button';\nimport { RippleModule } from 'primeng/ripple';\nimport { CommonModule } from '@angular/common';\nimport { switchMap } from 'rxjs';\nlet AnonymousRegistrationComponent = class AnonymousRegistrationComponent {\n  constructor(fb, catalog, api, messages) {\n    this.fb = fb;\n    this.catalog = catalog;\n    this.api = api;\n    this.messages = messages;\n    this.form = this.fb.nonNullable.group({\n      cedula: ['', Validators.required],\n      firstName: ['', Validators.required],\n      middleName: [''],\n      lastName: ['', Validators.required],\n      secondLastName: [''],\n      partyId: ['', Validators.required],\n      votesCongress: [false],\n      votesPresident: [false],\n      acceptsTerms: [false, Validators.requiredTrue],\n      departmentId: ['', Validators.required],\n      municipalityId: ['', Validators.required]\n    });\n    this.municipalities = [];\n  }\n  ngOnInit() {\n    this.catalog.loadInitial();\n    this.form.get('departmentId').valueChanges.pipe(switchMap(id => this.catalog.getMunicipalities(id))).subscribe(list => this.municipalities = list);\n  }\n  submit() {\n    if (this.form.invalid) return;\n    this.api.post('/api/persons/anonymous', this.form.getRawValue()).subscribe({\n      next: () => {\n        this.messages.add({\n          severity: 'success',\n          summary: 'Registro guardado'\n        });\n        this.form.reset({\n          votesCongress: false,\n          votesPresident: false,\n          acceptsTerms: false\n        });\n      },\n      error: error => this.messages.add({\n        severity: 'error',\n        summary: 'Error',\n        detail: error.error?.message ?? 'No se pudo guardar'\n      })\n    });\n  }\n};\nAnonymousRegistrationComponent = __decorate([Component({\n  selector: 'app-anonymous-registration',\n  standalone: true,\n  imports: [CommonModule, ReactiveFormsModule, CardModule, InputTextModule, DropdownModule, InputSwitchModule, CheckboxModule, ButtonModule, RippleModule],\n  templateUrl: './anonymous-registration.component.html',\n  styleUrls: ['./anonymous-registration.component.scss']\n})], AnonymousRegistrationComponent);\nexport { AnonymousRegistrationComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}