{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { TableModule } from 'primeng/table';\nimport { ButtonModule } from 'primeng/button';\nimport { InputTextModule } from 'primeng/inputtext';\nimport { DropdownModule } from 'primeng/dropdown';\nimport { TagModule } from 'primeng/tag';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { RippleModule } from 'primeng/ripple';\nlet PersonListComponent = class PersonListComponent {\n  constructor(api, fb, catalog, messages) {\n    this.api = api;\n    this.fb = fb;\n    this.catalog = catalog;\n    this.messages = messages;\n    this.displayedColumns = ['cedula', 'name', 'party', 'department', 'municipality', 'actions'];\n    this.data = [];\n    this.total = 0;\n    this.pageSize = 10;\n    this.currentPage = 0;\n    this.filterForm = this.fb.group({\n      cedula: [''],\n      name: ['']\n    });\n  }\n  ngOnInit() {\n    this.catalog.loadInitial();\n    this.search();\n  }\n  search(pageIndex = 0) {\n    this.currentPage = pageIndex;\n    const params = {\n      ...this.filterForm.value,\n      page: pageIndex,\n      size: this.pageSize\n    };\n    this.api.get('/api/persons', {\n      params\n    }).subscribe(result => {\n      this.data = result.items;\n      this.total = result.total;\n    });\n  }\n  onPage(event) {\n    this.search(event.page);\n  }\n  deactivate(person) {\n    this.api.delete(`/api/persons/${person.id}`).subscribe({\n      next: () => {\n        this.messages.add({\n          severity: 'success',\n          summary: 'Registro desactivado'\n        });\n        this.search(this.currentPage);\n      },\n      error: error => this.messages.add({\n        severity: 'error',\n        summary: 'Error',\n        detail: error.error?.message ?? 'No se pudo desactivar'\n      })\n    });\n  }\n};\nPersonListComponent = __decorate([Component({\n  selector: 'app-person-list',\n  standalone: true,\n  imports: [CommonModule, TableModule, ButtonModule, InputTextModule, DropdownModule, TagModule, RippleModule, ReactiveFormsModule],\n  templateUrl: './person-list.component.html',\n  styleUrls: ['./person-list.component.scss']\n})], PersonListComponent);\nexport { PersonListComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}